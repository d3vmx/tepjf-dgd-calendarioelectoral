<!DOCTYPE html>

<html lang="es" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendario electoral - TEPJF</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.4/index.global.min.js'></script>
    <link href="css/app.css" rel="stylesheet" />
</head>

<body>
    <header>
        <div class="shadow py-2">
            <div class="py-2 px-1 bg-white">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <a href="/" target="_blank" id="Inicio" aria-label="Boton Inicio">
                            <i class="bi bi-house-door-fill fs-5"></i>
                        </a>
                        <a href="mailto:cendoc@te.gob.mx?Subject=Contacto%20CENDOC%20landing%20page"
                            aria-label="Correo contacto web" title="se abrirá aplicación de correo">
                            <i class="bi bi-envelope-fill fs-5"></i>
                        </a>
                    </div>
                    <div class="d-flex flex-fill flex-column flex-sm-row justify-content-around align-items-center">
                        <div class="px-3 text-center lh-sm">
                            <strong style="color: hsl(250,50%,30%);">Calendario electoral</strong>
                        </div>
                        <a class="px-3" href="https://www.te.gob.mx/">
                            <img src="img/tepjf.svg" height="72"
                                alt="Tribunal Electoral del Poder Judicial de la Federación">
                        </a>
                        <div class="px-3 text-center lh-sm">
                            <strong style="color: hsl(250,50%,30%);">Dirección General de<br>Documentación</strong>
                        </div>
                    </div>
                    <div>
                        <a href="https://www.facebook.com/TEPJF" target="_blank" rel="noreferrer noopener"
                            aria-label="Redes Sociales Facebook">
                            <i class="bi bi-facebook fs-5"></i>
                        </a>
                        <a href="https://twitter.com/TEPJF_informa" target="_blank" rel="noreferrer noopener"
                            aria-label="Redes Sociales Twitter">
                            <i class="bi bi-twitter fs-5"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <!-- <a class="navbar-brand" href="#">Calendario electoral</a> -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" href="/">Inicio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Tabla.html">Tabla</a>
                        </li>
                         <!--<li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Dropdown
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#">Action</a></li>
                                <li><a class="dropdown-item" href="#">Another action</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">Something else here</a></li>
                            </ul>
                        </li> -->
                    </ul>
                    <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-success" type="submit">Buscar</button>
                    </form>
                </div>
            </div>
        </nav>
    </header>
    <section class="container-fluid">
        <div class="row">
            <div id="entidades" class="col-5 col-md-4 col-lg-3">
                <nav class="sidebar list-group my-2">
                    <ul id="entidades-menu" class="nav flex-column"></ul>
                </nav>
            </div>
            <div id="map" class="col-7 col-md-8 col-lg-9"></div>
        </div>
        <div class="row">
            <div id='calendar' class="col p-2"></div>
        </div>
    </section>
    <footer class="text-center font-small" style="background-color: #eee;">
        <div class="d-flex justify-content-around align-items-center">
            <div>
                <a class="html5 iconos_accesibilidad"
                    href="https://validator.w3.org/nu?doc=https://calendario-electoral.tepjf.com/" target="_blank"
                    aria-label="Sello Accesibilidad" rel="noreferrer noopener">
                    <img class="img-fluid mt-4" src="https://www.te.gob.mx/media/images/portal/html5.png"
                        alt="Validation HTML5">
                </a>
                <a class="css iconos_accesibilidad"
                    href="http://jigsaw.w3.org/css-validator/validator?uri=https://calendario-electoral.tepjf.com/&amp;profile=css3svg&amp;usermedium=all&amp;warning=1&amp;vextwarning=&amp;lang=es"
                    target="_blank" aria-label="Sello Accesibilidad" rel="noreferrer noopener">
                    <img class="img-fluid mt-4" src="https://www.te.gob.mx/media/images/portal/css.png"
                        alt="Validation CSS">
                </a>
            </div>
            <div class="d-flex flex-column justify-content-center align-items-center">
                <div class="pt-4">
                    Dirección General de Documentación<br>
                    Teléfonos 55-5728-2300 y 55-5728-2400, ext. 2206 y 2574.<br>
                    lunes a viernes de 9:00 a 18:00 horas<br>
                    <a href="mailto:cendoc@te.gob.mx">cendoc@te.gob.mx</a>
                </div>
                <div class="py-4 font-weight-bold">
                    Tribunal Electoral del Poder Judicial de la Federación (TEPJF)<br>
                    Teléfonos 55-5728-2300 y 55-5484-5410.<br>
                    Todos los derechos reservados.
                    <p>
                        <a href="https://www.te.gob.mx/transparencia/front/buscador/datos_personales#aviso"
                            target="_blank" rel="noreferrer noopener">Protección de Datos Personales</a>
                    </p>
                </div>
            </div>
            <div>
                <small class="text-muted">v2.1.0</small>
            </div>
        </div>
    </footer>
    <div id='calendarModal' class="modal" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 id="calendarModal-title" class="modal-title"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="table table-bordered">
                        <tr>
                            <th width="380" colspan="2" style="background-color:hsl(220,0%,85%)">
                                Cargos a elegir
                            </th>
                            <td>
                                <strong id="calendarModal-body-tipo-numero" class="d-block pb-2"></strong>
                                <span id="calendarModal-body-extraordinariaGetDisplayName"
                                    class="badge text-bg-secondary"></span>
                                <span id="calendarModal-body-federalGetDisplayName"
                                    class="badge text-bg-secondary"></span>
                                <span id="calendarModal-body-representacionGetDisplayName"
                                    class="badge text-bg-secondary"></span>
                            </td>
                            <td id="calendarModal-body-cargosUrl" width="115"></td>
                        </tr>
                        <tr>
                            <th colspan="2" style="background-color:hsl(0,50%,85%)">
                                Declaratoria de inicio del proceso electoral
                            </th>
                            <td id="calendarModal-body-declaratoriaInicio"> </td>
                            <td id="calendarModal-body-declaratoriaUrl"> </td>
                        </tr>
                        <tr>
                            <td width="120" rowspan="6" style="background-color:hsl(180,25%,85%)">
                                Candidaturas<br>independientes
                            </td>
                        </tr>
                        <tr>
                            <td width="180" style="background-color:hsl(180,25%,90%)">
                                Convocatoria
                            </td>
                            <td>
                                <span id="calendarModal-body-independientesConvocatoriaInicio"></span>
                            </td>
                            <td id="calendarModal-body-independientesConvocatoriaUrl"> </td>
                        </tr>
                        <tr>
                            <td style="background-color:hsl(180,25%,90%)">
                                Manifestación<br>de intención
                            </td>
                            <td>
                                del <span id="calendarModal-body-independientesIntencionInicio"></span> al <span
                                    id="calendarModal-body-independientesIntencionFin"></span>
                            </td>
                            <td id="calendarModal-body-independientesIntencionUrl"></td>
                        </tr>
                        <tr>
                            <td style="background-color:hsl(180,25%,90%)">
                                Obtención de<br>apoyo ciudadano
                            </td>
                            <td>
                                del <span id="calendarModal-body-independientesApoyoInicio"></span> al <span
                                    id="calendarModal-body-independientesApoyoFin"></span>
                            </td>
                            <td id="calendarModal-body-independientesApoyoUrl"></td>
                        </tr>
                        <tr>
                            <td style="background-color:hsl(180,25%,90%)">
                                Solicitud de registro<br>de candidatos
                            </td>
                            <td>
                                del <span id="calendarModal-body-independientesRegistroInicio"></span> al <span
                                    id="calendarModal-body-independientesRegistroFin"></span>
                            </td>
                            <td id="calendarModal-body-independientesRegistroUrl"></td>
                        </tr>
                        <tr>
                            <td style="background-color:hsl(180,25%,90%)">
                                Declaratoria de<br>procedencia de candidatura
                            </td>
                            <td>
                                del <span id="calendarModal-body-independientesProcedenciaInicio"></span> al <span
                                    id="calendarModal-body-independientesProcedenciaFin"></span>
                            </td>
                            <td id="calendarModal-body-independientesProcedenciaUrl"></td>
                        </tr>
                        <tr>
                            <td width="120" rowspan="3" style="background-color:hsl(60,25%,85%)">
                                Partidos<br>políticos
                            </td>
                        </tr>
                        <tr>
                            <td style="background-color:hsl(60,25%,90%)">
                                Precampañas<br>electorales
                            </td>
                            <td>
                                del <span id="calendarModal-body-partidosPrecampanasInicio"></span> al <span
                                    id="calendarModal-body-partidosPrecampanasFin"></span>
                            </td>
                            <td id="calendarModal-body-partidosPrecampanasUrl"></td>
                        </tr>
                        <tr>
                            <td style="background-color:hsl(60,25%,90%)">
                                Solicitud<br>de registro
                            </td>
                            <td>
                                del <span id="calendarModal-body-partidosRegistroInicio"></span> al <span
                                    id="calendarModal-body-partidosRegistroFin"></span>
                            </td>
                            <td id="calendarModal-body-partidosRegistroUrl"></td>
                        </tr>
                        <tr>
                            <th colspan="2" style="background-color:hsl(240,25%,85%)">
                                Campañas electorales
                            </th>
                            <td>
                                del <span id="calendarModal-body-campanasInicio"></span> al <span
                                    id="calendarModal-body-campanasFin"></span>
                            </td>
                            <td id="calendarModal-body-campanasUrl"></td>
                        </tr>
                        <tr>
                            <th colspan="2" style="background-color:hsl(0,50%,85%)">
                                Jornada electoral
                            </th>
                            <td id="calendarModal-body-jornadaInicio"></td>
                            <td id="calendarModal-body-jornadaUrl"></td>
                        </tr>
                        <tr>
                            <th colspan="2" style="background-color:hsl(120,25%,85%)">
                                Fecha de instalación
                            </th>
                            <td id="calendarModal-body-instalacionInicio"> </td>
                            <td id="calendarModal-body-instalacionUrl"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div id="progress" style="display: flex;"><b></b></div>

    <script src="https://code.jquery.com/jquery-3.6.3.slim.min.js"
        integrity="sha256-ZwqZIVdD3iXNyGHbSYdsmWP//UBokj2FHAxKuSBKDSo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
    <script type='text/javascript' src='js/app.js'></script>
    <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol' async defer></script>
    <script type="text/javascript">
        var map, calendar;
        document.body.onload = function () {
            document.getElementById('progress').style.display = 'flex';
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'https://cendocadmin.azurewebsites.net/api/calendario');
            xhr.onload = function (e) {
                if (xhr.status != 200) {
                    console.log(`Error ${xhr.status}: ${xhr.statusText}`);
                } else {
                    const data = JSON.parse(xhr.response);
                    loadMenu(data);
                    loadBingMap(data);
                    loadCalendar();
                }
            };
            xhr.onerror = function () {
                console.error("** An error occurred during the XMLHttpRequest");
            };
            xhr.send();
            document.getElementById('progress').style.display = 'none';
        }
        function loadMenu(data) {
            document.getElementById('progress').style.display = 'flex';
            var groups = data.reduce(function (items, key) {
                (items[key.entidad.nombre] = items[key.entidad.nombre] || []).push(key);
                return items;
            }, {});
            Object.keys(groups).forEach(k => {
                const group = groups[k];
                let hasSubmenu = document.createElement('li');
                hasSubmenu.className = 'has-submenu';
                let hasSubmenuItem = document.createElement('a');
                hasSubmenuItem.className = 'list-group-item';
                hasSubmenuItem.style.color = `hsl(${group[0].entidad.colorHue},100%,20%)`;
                hasSubmenuItem.style.backgroundColor = `hsl(${group[0].entidad.colorHue},50%,90%)`;
                hasSubmenuItem.style.borderColor = `hsl(${group[0].entidad.colorHue},50%,50%)`;
                hasSubmenuItem.innerHTML = `<strong>${k}</strong> <i class="bi small bi-caret-down-fill"></i>`;
                hasSubmenuItem.addEventListener('click', function (e) {
                    let nextEl = hasSubmenuItem.nextElementSibling;
                    let parentEl = hasSubmenuItem.parentElement;
                    if (nextEl) {
                        e.preventDefault();
                        let mycollapse = new bootstrap.Collapse(nextEl);

                        if (nextEl.classList.contains('show')) {
                            mycollapse.hide();
                        } else {
                            mycollapse.show();
                            var opened_submenu = parentEl.parentElement.querySelector('.submenu.show');
                            if (opened_submenu) {
                                new bootstrap.Collapse(opened_submenu);
                            }
                        }
                    }
                });
                hasSubmenu.appendChild(hasSubmenuItem);
                let submenu = document.createElement('div');
                submenu.className = 'submenu collapse';
                group.forEach(e => {
                    let submenuItem = document.createElement('a');
                    submenuItem.className = 'list-group-item';
                    submenuItem.style.borderColor = `hsl(${group[0].entidad.colorHue},50%,50%)`;
                    submenuItem.innerHTML = `${e.tipoDisplayName} [${e.numero}]`;
                    submenuItem.addEventListener("click", function () {
                        var xhr = new XMLHttpRequest();
                        xhr.open('GET', `https://cendocadmin.azurewebsites.net/api/calendario/${e.id}`);
                        xhr.onload = function (e) {
                            if (xhr.status != 200) {
                                console.log(`Error ${xhr.status}: ${xhr.statusText}`);
                            }
                            else {
                                const data = JSON.parse(xhr.response);
                                updateCalendar(data);
                                updateModal(data);
                            }
                        };
                        xhr.onerror = function () {
                            console.error("** An error occurred during the XMLHttpRequest");
                        };
                        xhr.send();
                    }, false);
                    submenu.appendChild(submenuItem);
                });
                hasSubmenu.appendChild(submenu);
                document.getElementById('entidades-menu').appendChild(hasSubmenu);
                document.getElementById('progress').style.display = 'none';
            });
        }
        function loadBingMap(data) {
            document.getElementById('progress').style.display = 'flex';
            map = new Microsoft.Maps.Map(document.getElementById('map'), {
                credentials: 'Ah5zHTWDWEHh2A3EW50XKN8GEM1u2NBuLspNLzQKVG4XYexEIUs_DU8scCLBidgh',
                mapTypeId: Microsoft.Maps.MapTypeId.grayscale,
                center: new Microsoft.Maps.Location(23.5, -101.5),
                showDashboard: false,
                zoom: 5
            });
            data.forEach(e => {
                Microsoft.Maps.loadModule(['Microsoft.Maps.SpatialDataService', 'Microsoft.Maps.Search'], function () {
                    var searchManager = new Microsoft.Maps.Search.SearchManager(map);
                    var geocodeRequest = {
                        where: e.entidad.nombre,
                        callback: function (geocodeResult, userData) {
                            var geoDataRequestOptions = {
                                lod: 1,
                                getAllPolygons: true
                            };
                            var polygonStyle = {
                                fillColor: `hsla(${e.entidad.colorHue},100%,90%,0.2)`,
                                strokeColor: `hsl(${e.entidad.colorHue},30%,50%)`,
                                strokeThickness: 2
                            };
                            switch (geocodeResult.results[0].entityType) {
                                case "CountryRegion":
                                case "AdminDivision1":
                                case "AdminDivision2":
                                case "Postcode1":
                                case "Postcode2":
                                case "Postcode3":
                                case "Postcode4":
                                case "Neighborhood":
                                case "PopulatedPlace":
                                    geoDataRequestOptions.entityType = geocodeResult.results[0].entityType;
                                    break;
                                default:
                                    var pin = new Microsoft.Maps.Pushpin(geocodeResult.results[0].location);
                                    map.entities.push(pin);
                                    return;
                            }
                            Microsoft.Maps.SpatialDataService.GeoDataAPIManager.getBoundary(
                                geocodeResult.results[0].location,
                                geoDataRequestOptions,
                                map,
                                function (data) {
                                    console.log();
                                    if (data.results && data.results.length > 0) {
                                        // var labelPin = new Microsoft.Maps.Pushpin(geocodeResult.results[0].location, {
                                        //     icon: '<svg xmlns="https://www.w3.org/2000/svg" width="1" height="1"></svg>',
                                        //     title: `${e.entidad.abrebiatura} [${e.numero}]`
                                        // });
                                        // map.entities.push(labelPin);
                                        var polygon = data.results[0].Polygons;
                                        polygon.metadata = {
                                            //label: labelPin,
                                            title: e.entidad.nombre,
                                            description: `${e.tipoDisplayName} (${e.numero})`,
                                            count: e.numero
                                        };
                                        map.entities.push(polygon);
                                        Microsoft.Maps.Events.addHandler(polygon[0], 'click', function () {
                                            var xhr = new XMLHttpRequest();
                                            xhr.open('GET', `https://cendocadmin.azurewebsites.net/api/calendario/${e.id}`);
                                            xhr.onload = function (e) {
                                                if (xhr.status != 200) {
                                                    console.log(`Error ${xhr.status}: ${xhr.statusText}`);
                                                }
                                                else {
                                                    const data = JSON.parse(xhr.response);
                                                    updateCalendar(data);
                                                    updateModal(data);
                                                }
                                            };
                                            xhr.onerror = function () {
                                                console.error("** An error occurred during the XMLHttpRequest");
                                            };
                                            xhr.send();
                                        });
                                    }
                                    // else {
                                    //     var pin = new Microsoft.Maps.Pushpin(data.location);
                                    //     map.entities.push(pin);
                                    //     Microsoft.Maps.Events.addHandler(pin, 'click', function () {
                                    //         //
                                    //     });
                                    // }
                                },
                                polygonStyle,
                                function errCallback(networkStatus, statusMessage) {
                                    console.log(networkStatus);
                                    console.log(statusMessage);
                                });
                        }
                    };
                    searchManager.geocode(geocodeRequest);
                });
            });
            document.getElementById('progress').style.display = 'none';
        }
        function loadCalendar() {
            document.getElementById('progress').style.display = 'flex';
            var calendarEl = document.getElementById('calendar');
            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'multiMonthYear', // dayGridMonth timeGridDay
                multiMonthMinColumns: 2,
                multiMonthMaxColumns: 3,
                // eventLimit: false,
                // views: {
                //     timeGrid: {
                //         eventLimit: 3 // timeGridWeek / timeGridDay
                //     }
                // },
                headerToolbar: {
                    right: 'today,prev,next'
                },
                contentHeight: 'auto',
                themeSystem: 'bootstrap5',
                height: 'auto',
                timeZone: 'UTC',
                // titleFormat: {
                //     //weekday: 'long',
                //     //year: 'numeric',
                //     month: 'long',
                //     day: 'numeric'
                // },
                //initialDate: new Date(today),
                //now: '',
                //nowIndicator: true,
                //events: fechas,
                eventClick: function (e) {
                    var xhr = new XMLHttpRequest();
                    xhr.open('GET', `https://cendocadmin.azurewebsites.net/api/calendario/${e.id}`);
                    xhr.onload = function (e) {
                        if (xhr.status != 200) {
                            console.log(`Error ${xhr.status}: ${xhr.statusText}`);
                        }
                        else {
                            const data = JSON.parse(xhr.response);
                            updateCalendar(data);
                            updateModal(data);
                        }
                    };
                    xhr.onerror = function () {
                        console.error("** An error occurred during the XMLHttpRequest");
                    };
                    xhr.send();
                    //e.el.style.borderColor = 'red';
                },
                // eventDidMount: function (info) {
                //     var tooltip = new Tooltip(info.el, {
                //         title: info.event.extendedProps.description,
                //         placement: 'top',
                //         trigger: 'hover',
                //         container: 'body'
                //     });
                // },
                buttonText: {
                    today: 'hoy',
                    month: 'mes',
                    week: 'semana',
                    day: 'día',
                    list: 'lista'
                }
            });
            calendar.setOption('locale', 'mx');
            calendar.render();
            document.getElementById('progress').style.display = 'none';
        }
        function updateCalendar(data) {
            calendar.getEvents().forEach(e => {
                e.remove();
            });
            calendar.addEvent({
                title: `Inicio`,
                description: `Declaratoria de inicio del proceso electoral [${data.entidad.nombre}]`,
                start: data.declaratoriaInicio,
                allDay: true,
                textColor: `#000`,
                color: `hsl(0,50%,85%)`
            });
            calendar.addEvent({
                title: `Independientes: Convocatoria`,
                description: `Convocatoria de las candidaturas independientes [${data.entidad.nombre}]`,
                start: data.independientesConvocatoriaInicio,
                allDay: true,
                textColor: `#000`,
                color: `hsl(180,25%,85%)`
            });
            calendar.addEvent({
                title: `Independientes: Manifestación de intención`,
                description: `Manifestación de intención de las candidaturas independientes [${data.entidad.nombre}]`,
                start: data.independientesIntencionInicio,
                end: data.independientesIntencionFin,
                allDay: true,
                textColor: `#000`,
                color: `hsl(180,25%,85%)`
            });
            calendar.addEvent({
                title: `Independientes: Obtención de apoyo`,
                description: `Obtención de apoyo de las candidaturas independientes [${data.entidad.nombre}]`,
                start: data.independientesApoyoInicio,
                end: data.independientesApoyoFin,
                allDay: true,
                textColor: `#000`,
                color: `hsl(180,25%,85%)`
            });
            calendar.addEvent({
                title: `Independientes: Solicitud de registro`,
                description: `Solicitud de registro de las candidaturas independientes [${data.entidad.nombre}]`,
                start: data.independientesRegistroInicio,
                end: data.independientesRegistroFin,
                allDay: true,
                textColor: `#000`,
                color: `hsl(180,25%,85%)`
            });
            calendar.addEvent({
                title: `Independientes: Declaratoria de procedencia`,
                description: `Declaratoria de procedencia de las candidaturas independientes [${data.entidad.nombre}]`,
                start: data.independientesProcedenciaInicio,
                end: data.independientesProcedenciaFin,
                allDay: true,
                textColor: `#000`,
                color: `hsl(180,25%,85%)`
            });
            calendar.addEvent({
                title: `Partidos: Precampañas`,
                description: `Precampañas de partidos políticos [${data.entidad.nombre}]`,
                start: data.partidosPrecampanasInicio,
                end: data.partidosPrecampanasFin,
                allDay: true,
                textColor: `#000`,
                color: `hsl(60,25%,85%)`
            });
            calendar.addEvent({
                title: `Partidos: Solicitud de registro`,
                description: `Solicitud de registro de los partidos políticos [${data.entidad.nombre}]`,
                start: data.partidosRegistroInicio,
                end: data.partidosRegistroFin,
                allDay: true,
                textColor: `#000`,
                color: `hsl(60,25%,85%)`
            });
            calendar.addEvent({
                title: `Campañas`,
                description: `Campañas electorales [${data.entidad.nombre}]`,
                start: data.campanasInicio,
                end: data.campanasFin,
                allDay: true,
                textColor: `#000`,
                color: `hsl(240,25%,85%)`
            });
            calendar.addEvent({
                title: `Jornada`,
                description: `Jornada electoral	[${data.entidad.nombre}]`,
                start: data.jornadaInicio,
                allDay: true,
                textColor: `#000`,
                color: `hsl(0,50%,85%)`
            });
            calendar.addEvent({
                title: `Instalación`,
                description: `Fecha de instalación [${data.entidad.nombre}]`,
                start: data.instalacionInicio,
                allDay: true,
                textColor: `#000`,
                color: `hsl(120,25%,85%)`
            });
        }
        function updateModal(data) {
            const opcionesFecha = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };

            document.getElementById('calendarModal-title').innerHTML = data.entidad.nombre;
            document.getElementById('calendarModal-body-tipo-numero').innerHTML = `${data.tipoDisplayName} (${data.numero} cargos)`;
            document.getElementById('calendarModal-body-extraordinariaGetDisplayName').innerHTML = data.extraordinariaGetDisplayName;
            document.getElementById('calendarModal-body-federalGetDisplayName').innerHTML = data.federalGetDisplayName;
            document.getElementById('calendarModal-body-representacionGetDisplayName').innerHTML = data.representacionGetDisplayName;
            document.getElementById('calendarModal-body-cargosUrl').innerHTML = '';
            data.cargosUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-cargosUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-declaratoriaInicio').innerHTML = new Date(data.declaratoriaInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-declaratoriaUrl').innerHTML = '';
            data.declaratoriaUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-declaratoriaUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-independientesConvocatoriaInicio').innerHTML = new Date(data.independientesConvocatoriaInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-independientesConvocatoriaUrl').innerHTML = '';
            data.independientesConvocatoriaUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-independientesConvocatoriaUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-independientesIntencionInicio').innerHTML = new Date(data.independientesIntencionInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-independientesIntencionFin').innerHTML = new Date(data.independientesIntencionFin).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-independientesIntencionUrl').innerHTML = '';
            data.independientesIntencionUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-independientesIntencionUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-independientesApoyoInicio').innerHTML = new Date(data.independientesApoyoInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-independientesApoyoFin').innerHTML = new Date(data.independientesApoyoFin).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-independientesApoyoUrl').innerHTML = '';
            data.independientesApoyoUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-independientesApoyoUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-independientesRegistroInicio').innerHTML = new Date(data.independientesRegistroInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-independientesRegistroFin').innerHTML = new Date(data.independientesRegistroFin).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-independientesRegistroUrl').innerHTML = '';
            data.independientesRegistroUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-independientesRegistroUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-independientesProcedenciaInicio').innerHTML = new Date(data.independientesProcedenciaInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-independientesProcedenciaFin').innerHTML = new Date(data.independientesProcedenciaFin).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-independientesProcedenciaUrl').innerHTML = '';
            data.independientesProcedenciaUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-independientesProcedenciaUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-partidosPrecampanasInicio').innerHTML = new Date(data.partidosPrecampanasInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-partidosPrecampanasFin').innerHTML = new Date(data.partidosPrecampanasFin).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-partidosPrecampanasUrl').innerHTML = '';
            data.partidosPrecampanasUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-partidosPrecampanasUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-partidosRegistroInicio').innerHTML = new Date(data.partidosRegistroInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-partidosRegistroFin').innerHTML = new Date(data.partidosRegistroFin).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-partidosRegistroUrl').innerHTML = '';
            data.partidosRegistroUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-partidosRegistroUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-campanasInicio').innerHTML = new Date(data.campanasInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-campanasFin').innerHTML = new Date(data.campanasFin).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-campanasUrl').innerHTML = '';
            data.campanasUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-campanasUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-jornadaInicio').innerHTML = new Date(data.jornadaInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-jornadaUrl').innerHTML = '';
            data.jornadaUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-jornadaUrl').appendChild(item);
            });

            document.getElementById('calendarModal-body-instalacionInicio').innerHTML = new Date(data.instalacionInicio).toLocaleDateString('es-MX', opcionesFecha);
            document.getElementById('calendarModal-body-instalacionUrl').innerHTML = '';
            data.instalacionUrl.split(',').forEach((e, i) => {
                let item = document.createElement('a');
                item.text = `Referencia ${++i}`;
                item.className = 'd-block';
                item.setAttribute('target', '_blank');
                item.setAttribute('href', e);
                document.getElementById('calendarModal-body-instalacionUrl').appendChild(item);
            });
            $('#calendarModal').modal('show');
        }
    </script>
</body>

</html>